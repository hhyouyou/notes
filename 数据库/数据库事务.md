[TOC]

# 数据库相关概念



## 事务

### 概念

**事务**是指满足`ACID`特性的一组操作. 而`ACID`模型是一组数据库设计原则，用于保证数据的可靠性

![事务](http://image-djx.test.upcdn.net/md/notes/transaction.png)

### ACID

#### 1. A: 原子性 atomicity 

事务被视为不可分割的最小单元, 事务的所有操作要么全部成功,要么都失败回滚.

回滚(rollback)可以用回滚日志(Undo Log)来实现, 回滚日志记录着事务所执行的修改操作, 在回滚时反向执行这些修改操作.

#### 2. C: 一致性 consistency

数据库在事务执行前后保持一致性状态. 在一致性状态下,所有事务对同一 数据的读取都是相同的.

#### 3. I:  隔离性 isolation

一个事务所做的修改在提交之前,  对其他事务是不可见的.

#### 4. D:  持久性 durability

一旦事务提交, 则其所做的修改会永久保存到数据库. 即使系统崩溃, 事务执行的结果也不能丢失.

系统发生崩溃可以用redo log (重做日志) 进行恢复, 从而实现持久性.



事务的ACID特性比较简单 , 但是特性互相之间的关系并不是平级的

* 只有满足一致性, 事务的执行结果才是正确的.

* 在非并发场景下, 事务串行执行, 隔离性是一定能满足的. 此时只要满足原子性,就一定能满足一致性
* 在并发场景下, 多个事务并行执行,此时事务要同时满足隔离性,和原子性, 才能满足一致性
* 而最后的持久性, 主要适用于系统崩溃的情况. 



## 并发一致性问题

并发情况下,无法保证隔离性,出现的一些一致性问题.

### 修改丢失

修改丢失指的是, 一个事务修改了某个数据后, 被另一个事务修改







## 事务隔离级别



## 锁







## 并发版本控制(MVCC)





## 关系数据库设计理论





# 参考文章



